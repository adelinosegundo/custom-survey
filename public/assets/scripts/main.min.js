function survey_ready(){rearrage(),cocoon_after_insert_question()}function cocoon_after_insert_question(){$("#items").on("cocoon:after-insert",function(e,t){re_order();var n=$("#items > div").size(),a="alternatives"+n,r=t.find("#add_alternative"),o=t.find("#alternatives");r.attr("data-association-insertion-node","#"+a),o.prop("id",a)})}function re_order(){var e=$("#items > div");e.each(function(e,t){var n=$(this).find("input[name*=sequence]");n.val(e+1)})}function rearrage(){var e=$("#items > div");e.sort(function(e,t){console.log(e);var n=$(e).find("input[name*=sequence]"),a=$(t).find("input[name*=sequence]");return parseInt(n.val())>parseInt(a.val())}).each(function(){var e=$(this);e.remove(),e.appendTo("#items")})}!function(){var e={elements:document.querySelectorAll("[data-href]"),redirect_to:function(t,n){n=n||"",e.simulate_anchor(t,n)},simulate_anchor:function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("target",t),n.click()},init:function(){for(var e=0;e<this.elements.length;e++){var t=this.elements[e];t.style.cursor="pointer",t.addEventListener("click",function(){if("_blank"==$(this).attr("data-target")){var e=window.open($(this).attr("data-href"),"_blank");e.focus()}else window.location=$(this).attr("data-href")},!1)}}};e.init()}(),$(document).ready(function(){$("#edit_survey").steps({bodyTag:"fieldset",forceMoveForward:!1,enableCancelButton:!1,onStepChanging:function(e,t,n){if(t>n)return!0;var a=$(this);return n>t&&($(".body:eq("+n+") label.error",a).remove(),$(".body:eq("+n+") .error",a).removeClass("error")),a.validate().settings.ignore=":disabled,:hidden",a.valid()},onStepChanged:function(e,t,n){2===t&&3===n&&$(this).steps("previous")},onFinishing:function(e,t){var n=$(this);return n.validate().settings.ignore=":disabled",n.valid()},onFinished:function(e,t){var n=$(this);n.submit()}}).validate({errorPlacement:function(e,t){t.before(e)},rules:{confirm:{equalTo:"#password"}}});var e={".chosen-select":{width:"inherit"},".chosen-select-deselect":{allow_single_deselect:!0},".chosen-select-no-single":{disable_search_threshold:10},".chosen-select-no-results":{no_results_text:"Oops, nothing found!"},".chosen-select-width":{width:"95%"}};for(var t in e)$(t).chosen(e[t])}),$(document).on("click","[data-order-the-table]",function(){ordenator=$(this),value=ordenator.attr("data-order-the-table"),$("[data-order-the-table]").removeClass("active"),ordenator.addClass("active"),$("[data-pos-"+value+"]").each(function(e){$(this).html($(this).attr("data-pos-"+value))})}),$(document).on("click",".pagination a",function(){ordenator=$("[data-order-the-table].active"),ordenator.length&&(value=ordenator.attr("data-order-the-table"),$("[data-pos-"+value+"]").each(function(e){$(this).html($(this).attr("data-pos-"+value))}))}),$(document).ready(survey_ready),$(document).on("page:load",survey_ready);